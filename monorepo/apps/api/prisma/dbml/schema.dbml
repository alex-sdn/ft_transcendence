//// ------------------------------------------------------
//// THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
//// ------------------------------------------------------

Table User {
  id Int [pk, increment]
  login42 String [unique, not null]
  nickname String [unique, not null]
  avatar String [not null, default: 'default-avatar']
  createdAt DateTime [default: `now()`, not null]
  has2fa Boolean [not null, default: false]
  secret2fa String
  win Int [not null, default: 0]
  loss Int [not null, default: 0]
  LP Int [not null, default: 100]
  friends1 Friendship [not null]
  friends2 Friendship [not null]
  blocked Blocked [not null]
  blockedBy Blocked [not null]
  matches Match [not null]
  channels Channel [not null]
}

Table Match {
  id Int [pk, increment]
  date DateTime [default: `now()`, not null]
  players User [not null]
  p1LP Int [not null]
  p2LP Int [not null]
  p1score Int [not null]
  p2score Int [not null]
  type GameType [not null]
}

Table Channel {
  id Int [pk, increment]
  name String [unique, not null]
  access ChatAccess [not null]
  password String
  members User [not null]
  owner Int
  admins Int[] [not null]
  bans Int[] [not null]
  mutes Int[] [not null]
}

Table Friendship {
  id Int [pk, increment]
  user1 User [not null]
  user1Id Int [not null]
  user2 User [not null]
  user2Id Int [not null]

  indexes {
    (user1Id, user2Id) [unique]
  }
}

Table Blocked {
  id Int [pk, increment]
  blocker User [not null]
  blockerId Int [not null]
  blocked User [not null]
  blockedId Int [not null]

  indexes {
    (blockerId, blockedId) [unique]
  }
}

Enum Statuses {
  online
  offline
  ingame
}

Enum GameType {
  ranked
  casual
}

Enum ChatAccess {
  public
  private
  protected
}

Ref: Friendship.user1Id > User.id

Ref: Friendship.user2Id > User.id

Ref: Blocked.blockerId > User.id

Ref: Blocked.blockedId > User.id